# ğŸ¯ Agent èŠå¤©é¡µé¢ - ä½¿ç”¨è¯´æ˜

## å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
cd ui
yarn dev
```

### 2. è®¿é—®é¡µé¢

æ‰“å¼€æµè§ˆå™¨è®¿é—®:
```
http://localhost:3000/{teamId}/agents/{agentId}
```

ä¾‹å¦‚:
```
http://localhost:3000/team-123/agents/agent-456
```

## âœ¨ åŠŸèƒ½æ¼”ç¤º

### åŠŸèƒ½ 1: è‡ªåŠ¨åˆå§‹åŒ–

âœ… **é¡µé¢åŠ è½½æ—¶**
- è‡ªåŠ¨åŠ è½½ Agent ä¿¡æ¯
- è‡ªåŠ¨åŠ è½½ Thread åˆ—è¡¨
- å¦‚æœæ²¡æœ‰ Thread,è‡ªåŠ¨åˆ›å»ºç¬¬ä¸€ä¸ªå¯¹è¯

### åŠŸèƒ½ 2: åˆ›å»ºæ–°å¯¹è¯

âœ… **ç‚¹å‡» "New Conversation" æŒ‰é’®**
- è‡ªåŠ¨åˆ›å»ºæ–°çš„ Thread
- è‡ªåŠ¨åˆ‡æ¢åˆ°æ–°å¯¹è¯
- æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯

### åŠŸèƒ½ 3: åˆ‡æ¢å¯¹è¯

âœ… **ç‚¹å‡»åˆ—è¡¨ä¸­çš„ä»»æ„å¯¹è¯**
- è‡ªåŠ¨åŠ è½½è¯¥å¯¹è¯çš„å†å²æ¶ˆæ¯
- é«˜äº®æ˜¾ç¤ºå½“å‰å¯¹è¯
- ä¿æŒå…¶ä»–å¯¹è¯åœ¨åå°

### åŠŸèƒ½ 4: å‘é€æ¶ˆæ¯

âœ… **åœ¨è¾“å…¥æ¡†è¾“å…¥å¹¶å‘é€**
- æ¶ˆæ¯ç«‹å³æ˜¾ç¤º
- å®æ—¶æµå¼å“åº”
- è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
- æ”¯æŒå·¥å…·è°ƒç”¨

### åŠŸèƒ½ 5: åˆ é™¤å¯¹è¯

âœ… **Hover å¯¹è¯é¡¹,ç‚¹å‡»åˆ é™¤æŒ‰é’®**
- æ˜¾ç¤ºåˆ é™¤ç¡®è®¤
- åˆ é™¤åè‡ªåŠ¨åˆ‡æ¢åˆ°å…¶ä»–å¯¹è¯
- æ›´æ–° Thread åˆ—è¡¨

## ğŸ¨ UI å…ƒç´ è¯´æ˜

### å·¦ä¾§æ  - ThreadList

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¬ Agent Name     â”‚  â† Agent ä¿¡æ¯
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [+ New Conv]      â”‚  â† æ–°å»ºæŒ‰é’®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¬ Thread 1    ğŸ—‘ â”‚  â† å¯¹è¯é¡¹ + åˆ é™¤
â”‚  ğŸ’¬ Thread 2    ğŸ—‘ â”‚
â”‚  ğŸ’¬ Thread 3    ğŸ—‘ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**äº¤äº’è¯´æ˜:**
- ç‚¹å‡»å¯¹è¯é¡¹ â†’ åˆ‡æ¢å¯¹è¯
- Hover å¯¹è¯é¡¹ â†’ æ˜¾ç¤ºåˆ é™¤æŒ‰é’®
- ç‚¹å‡»åˆ é™¤ â†’ åˆ é™¤å¯¹è¯
- æ´»åŠ¨å¯¹è¯æœ‰é«˜äº®è¾¹æ¡†

### å³ä¾§ - Thread (èŠå¤©åŒº)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Welcome Message           â”‚  â† ç©ºçŠ¶æ€
â”‚  æˆ–                        â”‚
â”‚  ğŸ“ User: Hello            â”‚  â† æ¶ˆæ¯åˆ—è¡¨
â”‚  ğŸ¤– Assistant: Hi there!   â”‚
â”‚  ...                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Type a message...]  [â†’]  â”‚  â† è¾“å…¥æ¡†
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**äº¤äº’è¯´æ˜:**
- æ˜¾ç¤ºå†å²æ¶ˆæ¯
- æ”¯æŒ Markdown æ¸²æŸ“
- æµå¼å“åº”åŠ¨ç”»
- å·¥å…·è°ƒç”¨æ˜¾ç¤º
- æ¶ˆæ¯æ“ä½œ (å¤åˆ¶ã€é‡æ–°ç”Ÿæˆç­‰)

## ğŸ”„ å®Œæ•´ç”¨æˆ·æµç¨‹

### æµç¨‹ 1: æ–°ç”¨æˆ·é¦–æ¬¡ä½¿ç”¨

```
1. è®¿é—®é¡µé¢
   â†“
2. é¡µé¢åŠ è½½ Agent
   â†“
3. è‡ªåŠ¨åˆ›å»ºé¦–ä¸ªå¯¹è¯
   â†“
4. æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
   â†“
5. ç”¨æˆ·å¼€å§‹èŠå¤©
```

### æµç¨‹ 2: è€ç”¨æˆ·è¿”å›

```
1. è®¿é—®é¡µé¢
   â†“
2. åŠ è½½ Agent å’Œ Thread åˆ—è¡¨
   â†“
3. æ˜¾ç¤ºæ‰€æœ‰å†å²å¯¹è¯
   â†“
4. è‡ªåŠ¨é€‰æ‹©æœ€è¿‘çš„å¯¹è¯
   â†“
5. åŠ è½½å†å²æ¶ˆæ¯
   â†“
6. ç”¨æˆ·ç»§ç»­èŠå¤©
```

### æµç¨‹ 3: åˆ›å»ºæ–°å¯¹è¯

```
1. ç‚¹å‡» "New Conversation"
   â†“
2. åˆ›å»ºæ–° Thread
   â†“
3. åˆ‡æ¢åˆ°æ–°å¯¹è¯
   â†“
4. æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
   â†“
5. å¼€å§‹æ–°çš„å¯¹è¯
```

## ğŸ“± å“åº”å¼è®¾è®¡

### æ¡Œé¢ç«¯ (æ¨è)

```
å®½åº¦ â‰¥ 1024px
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ThreadList â”‚  Thread         â”‚
â”‚ (320px)    â”‚  (è‡ªé€‚åº”)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¹³æ¿ç«¯

```
å®½åº¦: 768px - 1024px
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Thread â”‚  Thread     â”‚
â”‚ List   â”‚  (è‡ªé€‚åº”)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç§»åŠ¨ç«¯ (å¾…ä¼˜åŒ–)

```
å®½åº¦ < 768px
å»ºè®®: æ·»åŠ åˆ‡æ¢æŒ‰é’®
åœ¨ ThreadList å’Œ Thread ä¹‹é—´åˆ‡æ¢
```

## âš™ï¸ é…ç½®é€‰é¡¹

### è‡ªå®šä¹‰ Agent æ¨¡å‹

åœ¨åˆ›å»º Agent æ—¶é…ç½®:
```typescript
{
  config: {
    model: 'gpt-4',
    temperature: 0.7,
    maxTokens: 2000
  }
}
```

### è‡ªå®šä¹‰æ¬¢è¿æ¶ˆæ¯

åœ¨ Thread ç»„ä»¶ä¸­ä¿®æ”¹:
```tsx
<ThreadWelcome />
```

### è‡ªå®šä¹‰æ ·å¼

åœ¨é¡µé¢ç»„ä»¶ä¸­ä¿®æ”¹ className:
```tsx
<ThreadList className="custom-class" />
<Thread className="custom-class" />
```

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: é¡µé¢æ˜¾ç¤º "Agent not found"

**åŸå› **: Agent ID ä¸å­˜åœ¨æˆ–æ²¡æœ‰æƒé™

**è§£å†³**:
1. æ£€æŸ¥ URL ä¸­çš„ agentId æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤ç”¨æˆ·æœ‰æƒé™è®¿é—®è¯¥ Agent
3. æ£€æŸ¥åç«¯ Agent æ˜¯å¦å­˜åœ¨

### é—®é¢˜ 2: ThreadList æ˜¾ç¤º "No conversations yet"

**åŸå› **:
- é¦–æ¬¡è®¿é—®,è¿˜æ²¡åˆ›å»ºå¯¹è¯
- API åŠ è½½å¤±è´¥
- æ‰€æœ‰å¯¹è¯éƒ½è¢«åˆ é™¤

**è§£å†³**:
1. ç‚¹å‡» "New Conversation" åˆ›å»ºæ–°å¯¹è¯
2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
3. éªŒè¯ API è°ƒç”¨æ˜¯å¦æˆåŠŸ

### é—®é¢˜ 3: æ¶ˆæ¯å‘é€åæ²¡æœ‰å“åº”

**åŸå› **:
- åç«¯æœåŠ¡å¼‚å¸¸
- ç½‘ç»œè¿æ¥é—®é¢˜
- API ç«¯ç‚¹é”™è¯¯

**è§£å†³**:
1. æ£€æŸ¥ç½‘ç»œè¯·æ±‚çŠ¶æ€
2. æŸ¥çœ‹åç«¯æ—¥å¿—
3. éªŒè¯ API é…ç½®

### é—®é¢˜ 4: æµå¼å“åº”ä¸å·¥ä½œ

**åŸå› **:
- SSE è¿æ¥å¤±è´¥
- åç«¯ä¸æ”¯æŒæµå¼
- ä»£ç†é…ç½®é—®é¢˜

**è§£å†³**:
1. æ£€æŸ¥ SSE è¿æ¥
2. éªŒè¯åç«¯å®ç°
3. æ£€æŸ¥ä»£ç†é…ç½®

## ğŸ” è°ƒè¯•æŠ€å·§

### 1. æŸ¥çœ‹ Runtime çŠ¶æ€

æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°:
```javascript
// åœ¨æ§åˆ¶å°è¾“å…¥
window.__ASSISTANT_RUNTIME__
```

### 2. æŸ¥çœ‹ Thread åˆ—è¡¨

```javascript
// æŸ¥çœ‹æ‰€æœ‰ threads
console.log(runtime.threadList.threads)

// æŸ¥çœ‹å½“å‰ thread
console.log(runtime.thread)
```

### 3. æŸ¥çœ‹æ¶ˆæ¯

```javascript
// æŸ¥çœ‹å½“å‰ thread çš„æ¶ˆæ¯
console.log(runtime.thread.messages)
```

### 4. å¯ç”¨è¯¦ç»†æ—¥å¿—

åœ¨ `useThreadListRuntime.ts` ä¸­æ·»åŠ :
```typescript
console.log('Current thread:', currentThreadId);
console.log('Messages:', currentMessages);
console.log('Is running:', isRunning);
```

## ğŸ“Š æ€§èƒ½ç›‘æ§

### å…³é”®æŒ‡æ ‡

1. **é¦–æ¬¡åŠ è½½æ—¶é—´**: < 2s
2. **Thread åˆ‡æ¢**: < 500ms
3. **æ¶ˆæ¯å‘é€**: < 100ms
4. **æµå¼å“åº”å»¶è¿Ÿ**: < 200ms

### ç›‘æ§å·¥å…·

```javascript
// é¡µé¢åŠ è½½æ—¶é—´
performance.measure('page-load');

// Thread åˆ‡æ¢æ—¶é—´
performance.measure('thread-switch');

// æ¶ˆæ¯å‘é€æ—¶é—´
performance.measure('message-send');
```

## ğŸš€ é«˜çº§ç”¨æ³•

### ä½¿ç”¨è‡ªå®šä¹‰ Hook

```tsx
import { useThreadListRuntime } from '@/features/agent';

const { runtime, threads, currentThreadId, isLoadingThreads } =
  useThreadListRuntime({ teamId, userId, agentId });

// è‡ªå®šä¹‰ UI
<CustomThreadList threads={threads} />
```

### è®¿é—® Runtime API

```tsx
import { useAssistantRuntime } from '@assistant-ui/react';

const runtime = useAssistantRuntime();

// å‘é€æ¶ˆæ¯
runtime.thread.append({ role: 'user', content: 'Hello' });

// åˆ›å»ºæ–° thread
runtime.threadList.switchToNewThread();

// åˆ‡æ¢ thread
runtime.threadList.switchToThread(threadId);
```

### è‡ªå®šä¹‰æ¶ˆæ¯æ¸²æŸ“

ä¿®æ”¹ [thread.tsx](../src/components/assistant-ui/thread.tsx):
```tsx
<MessagePrimitive.Parts
  components={{
    Text: CustomMarkdownText,
    tools: {
      Fallback: CustomToolFallback
    },
  }}
/>
```

## ğŸ“š ç›¸å…³èµ„æº

### æ–‡æ¡£

- [ThreadListRuntime API](../ui/src/features/agent/docs/ThreadListRuntime.md)
- [å¿«é€Ÿå¼€å§‹](../ui/src/features/agent/QUICKSTART.md)
- [å®ç°æ€»ç»“](../ui/src/features/agent/README.md)

### æºç 

- [useThreadListRuntime.ts](../ui/src/features/agent/hooks/useThreadListRuntime.ts)
- [AgentRuntimeProvider.tsx](../ui/src/features/agent/components/AgentRuntimeProvider.tsx)
- [é¡µé¢ç»„ä»¶](../ui/src/pages/$teamId/agents/$agentId/index.lazy.tsx)

### å¤–éƒ¨èµ„æº

- [Assistant-UI å®˜æ–¹æ–‡æ¡£](https://docs.assistant-ui.com)
- [Assistant-UI GitHub](https://github.com/assistant-ui/assistant-ui)
- [ç¤ºä¾‹é¡¹ç›®](https://github.com/assistant-ui/assistant-ui/tree/main/examples)

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«!** ğŸ‰

å¦‚æœ‰é—®é¢˜,è¯·æŸ¥é˜…æ–‡æ¡£æˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚
