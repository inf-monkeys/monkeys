.layer-panel {
  position: absolute !important;
  left: 10px !important;
  top: 10px !important;
  bottom: 10px !important;
  /* 宽度由内联样式控制以支持拖拽调整 */
  background: white;
  display: flex;
  flex-direction: column;
  z-index: 1000;
  border-radius: 20px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(10px);
  overflow: visible; /* 允许内部的弹出层超出容器显示 */
}

.layer-panel-content {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: visible; /* 允许子元素弹出菜单不被裁剪 */
  border-radius: 20px;
}

/* 折叠时：只保留顶栏高度 */
.layer-panel-content.collapsed {
  height: auto !important;
}

/* 顶部按钮栏 */
.top-button-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  border-bottom: 1px solid #e1e1e1;
  flex-shrink: 0;
  gap: 8px;
}

/* 确保切换布局按钮在最右侧 */
.top-button-bar .layout-toggle {
  margin-left: auto;
}

.top-button {
  width: 32px;
  height: 32px;
  border: none;
  background: #f8f9fa;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  color: #666;
  transition: all 0.2s ease;
}

.top-button:hover {
  background: #e9ecef;
  color: #333;
}

.top-button.active {
  background: #e9ecef;
  color: #333;
}

/* 更多菜单下拉 */
.more-menu-dropdown {
  position: absolute;
  top: 36px;
  left: 0;
  background: white;
  border: 1px solid #e1e1e1;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  z-index: 10000;
  min-width: 200px;
  padding: 4px 0;
}

.menu-item {
  padding: 8px 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 14px;
  color: #333;
  transition: background-color 0.2s ease;
}

.menu-item:hover {
  background-color: #f8f9fa;
}

.menu-item.disabled {
  color: #999 !important;
  opacity: 0.55 !important; /* 明显的置灰效果 */
  filter: grayscale(0.2);
}

.menu-item.disabled:hover {
  background-color: transparent !important;
  cursor: default !important; /* 光标不变 */
}

.shape-tree {
	display: flex;
	flex-direction: column;
	overflow-y: auto;
	flex: 1;
}

/* 隐藏滚动条但允许滚动 - 兼容 Webkit / Firefox / 旧版 Edge */
.shape-tree::-webkit-scrollbar {
	display: none;
}
.shape-tree {
	-ms-overflow-style: none; /* IE and old Edge */
	scrollbar-width: none; /* Firefox */
}

.shape-item {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 6px 10px;
	cursor: pointer;
	user-select: none;
}

.shape-item:hover {
	background-color: #f8f9fa;
}

.shape-visibility-toggle {
	padding: 3px 6px;
	border-radius: 3px;
	outline: none;
	border: none;
	background: none;
	flex-shrink: 0;
}
.shape-visibility-toggle:hover {
	cursor: pointer;
	background-color: #0000000b;
}

.layer-panel-title {
  padding: 10px;
  font-size: smaller;
  font-weight: bolder;
  border-bottom: 1px solid #e1e1e1;
  background: white;
  flex-shrink: 0;
  border-radius: 20px 20px 0 0;
}

.shape-name-input {
	border: none;
	background: none;
	width: 0;
	flex-grow: 1;
	padding: 0;
	outline: none;
}

.shape-name {
	overflow: hidden;
	text-overflow: ellipsis;
	text-wrap: nowrap;
	flex-grow: 1;
	font-size: 13px;
}

/* Layer Panel样式 - 现在在外层容器中 */
.layer-panel {
	background: white;
	display: flex;
	flex-direction: column;
	border-right: 1px solid #e1e1e1;
	height: 100%;
}

/* 页面列表部分 */
.pages-section {
	flex-shrink: 0;
}

.pages-list {
	/* max-height 已移除，现在由 JavaScript 动态控制高度 */
	overflow-y: auto;
}

/* 隐藏滚动条但允许滚动 - 兼容 Webkit / Firefox / 旧版 Edge */
.pages-list::-webkit-scrollbar {
	display: none;
}
.pages-list {
	-ms-overflow-style: none; /* IE and old Edge */
	scrollbar-width: none; /* Firefox */
}

/* 页面标题栏按钮 */
.page-header-button {
	width: 20px;
	height: 20px;
	border: none;
	background: none;
	cursor: pointer;
	display: flex;
	align-items: center;
	justify-content: center;
	border-radius: 3px;
	transition: background-color 0.2s;
}

.page-header-button:hover {
	background-color: #f0f0f0;
}

/* 页面搜索输入框 */
.page-search-input {
	transition: border-color 0.2s;
}

.page-search-input:focus {
	border-color: #2563eb !important;
}

.page-item {
	user-select: none;
}

.page-item:hover {
	background-color: #f8f9fa;
}

.page-name-input {
	border: none;
	background: none;
	outline: none;
	font-size: 13px;
	width: 100%;
}

/* 图层列表部分 */
.shapes-section {
	flex: 1;
	display: flex;
	flex-direction: column;
	min-height: 0; /* 确保可以滚动 */
}

/* 拖拽手柄 */
.resize-handle {
	position: relative;
	user-select: none;
}

.resize-handle:hover {
	background-color: #e2e8f0 !important;
}

.resize-handle:active {
	background-color: #2563eb !important;
}

.resize-handle:active .resize-indicator {
	background-color: white !important;
}

/* Dark mode support */
.dark .layer-panel {
  background: rgba(30, 30, 30, 0.95);
  color: #e0e0e0;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
}

.dark .top-button-bar {
  border-bottom-color: #383838;
}

.dark .top-button {
  background: #2a2a2a;
  color: #e0e0e0;
}

.dark .top-button:hover {
  background: #383838;
  color: #ffffff;
}

.dark .top-button.active {
  background: #383838;
  color: #ffffff;
}

.dark .more-menu-dropdown {
  background: #1e1e1e;
  border-color: #383838;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

.dark .menu-item {
  color: #e0e0e0;
}

.dark .menu-item:hover {
  background-color: #2a2a2a;
}

.dark .menu-item.disabled {
  color: #666 !important;
}

.dark .menu-item.disabled:hover {
  background-color: transparent !important;
}

.dark .shape-item:hover {
	background-color: #2a2a2a;
}

.dark .shape-name {
	color: #e0e0e0;
}

.dark .shape-visibility-toggle:hover {
	background-color: #2a2a2a;
}

.dark .page-item:hover {
	background-color: #2a2a2a;
}

.dark .page-name-input {
	color: #e0e0e0;
}

.dark .resize-handle {
	background-color: #2a2a2a;
	border-top-color: #383838;
	border-bottom-color: #383838;
}

.dark .resize-handle:hover {
	background-color: #383838 !important;
}

.dark .resize-handle:active {
	background-color: #3b82f6 !important;
}

.dark .page-header-button:hover {
	background-color: #2a2a2a;
}

.dark .page-search-input {
	background-color: #1e1e1e;
	border-color: #383838;
	color: #e0e0e0;
}

.dark .page-search-input:focus {
	border-color: #3b82f6 !important;
}

/* 画板区域背景：通过 tldraw 的背景变量统一设置 */
.tldraw__editor {
	--color-background: rgb(237, 237, 237) !important;
}

/* 兜底：直接给画布/背景容器设色（不同版本类名） */
.tl-canvas,
.tl-background {
	background-color: rgb(237, 237, 237) !important;
}

/* tldraw 右下角的水印图标已恢复显示 */

/* 通用：隐藏左侧 layer-panel 内所有滚动条，但保留滚动功能 */
.layer-panel,
.layer-panel * {
	-ms-overflow-style: none; /* IE and old Edge */
	scrollbar-width: none; /* Firefox */
}
.layer-panel::-webkit-scrollbar,
.layer-panel *::-webkit-scrollbar {
	display: none; /* WebKit */
}

/* 右侧侧栏：默认隐藏滚动条，悬停时显示，仅纵向滚动 */
.right-sidebar-scroll {
  overflow-y: auto;
  overflow-x: hidden;
  height: 100%;
  /* 预留滚动条沟槽，避免出现/隐藏时内容抖动 */
  scrollbar-gutter: stable;
}
.right-sidebar-scroll::-webkit-scrollbar {
  width: 8px; /* 始终预留宽度，避免布局位移 */
  height: 8px;
}
.right-sidebar-scroll::-webkit-scrollbar-track {
  background: transparent;
}
.right-sidebar-scroll::-webkit-scrollbar-thumb {
  background: transparent; /* 默认透明，不干扰布局 */
  border-radius: 8px;
}
.right-sidebar-scroll:hover::-webkit-scrollbar-thumb {
  background: rgba(0,0,0,0.25);
}
.dark .right-sidebar-scroll:hover::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.25);
}
.right-sidebar-scroll {
  scrollbar-width: thin; /* 始终保留细滚动条空间（Firefox）*/
  scrollbar-color: transparent transparent; /* 默认透明 */
}
.right-sidebar-scroll:hover {
  scrollbar-color: rgba(0,0,0,0.25) transparent;
}
.dark .right-sidebar-scroll:hover {
  scrollbar-color: rgba(255,255,255,0.25) transparent;
}